---
# Docker compose file for dev environments.
services:
  lanraragi:
    build:
      dockerfile: tools/build/docker/Dockerfile-dev
      context: ../../..
    volumes:
      - ../../../:/home/koyomi/lanraragi
    ports:
      - "3000:3000"
    environment:
      - "LRR_REDIS_ADDRESS=redis:6379"
    networks:
      - lrr

  redis:
    image: "docker.io/redis:7"
    volumes:
      - redis_data:/data
    command: [ "redis-server", "--maxmemory", "500mb", "--maxmemory-policy", "volatile-lru" ]

    networks:
      - lrr

networks:
  lrr:

volumes:
  redis_data:
